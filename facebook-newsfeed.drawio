<mxfile host="Electron" modified="2024-07-02T12:02:48.007Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.6.8 Chrome/114.0.5735.289 Electron/25.5.0 Safari/537.36" etag="wkjloxXD0gVlqhZ-GnRd" version="21.6.8" type="device">
  <diagram name="Page-1" id="oM06ox3lzriTN8PwLsCJ">
    <mxGraphModel dx="1434" dy="854" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="vBqkdxFd15xFxzyx8WQM-1" value="FACEBOOK NEWSFEED" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="294" y="20" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-2" value="&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt;Functional requirements:&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;1. Newsfeed will be generated based on the posts from the people, pages, and groups that a user follows.&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;2. A user may have many friends and follow a large number of pages/groups.&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;3. Feeds may contain images, videos, or just text.&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;4. Our service should support appending new posts as they arrive to the newsfeed for all active users.&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;align=left;verticalAlign=top;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="50" y="80" width="340" height="180" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-3" value="&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 14px;&quot;&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt;Non-functional requirements&lt;/b&gt;&lt;/span&gt;&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 14px;&quot;&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt;&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;b&gt;1. Availability &amp;amp; sacle&lt;/b&gt;: Our system should be able to generate any user’s newsfeed in real-time - maximum latency seen by the end user would be 2s.&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;b&gt;2. Low-latency&lt;/b&gt; A post shouldn’t take more than 5s to make it to a user’s feed assuming a new newsfeed request comes in.&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;Assume posts are generated, consider only the feeds that are to be generated. i.e: consider READs part only&lt;/div&gt;" style="whiteSpace=wrap;html=1;verticalAlign=top;align=left;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="430" y="80" width="370" height="220" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-4" value="&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt;Scale&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;users = 300M DAU&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;user fetches feed/day = 5 times&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;b&gt;Total requests = 300M * 5 = 1.5B feed requests/day&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;b&gt;Storage&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;Post size = 1KB&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;Assume 500 posts in each users feed&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;Per user storage = 500 * 1 = 500KB&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;Total storage&amp;nbsp; = 300M * 500KB&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;= 300 x 10^6 * 500 * 10^3&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;= 150000 x 10^9 = 150 x 10^12&lt;/div&gt;&lt;b&gt;= 150 TB&lt;/b&gt;" style="whiteSpace=wrap;html=1;align=left;verticalAlign=top;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="50" y="320" width="390" height="260" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-5" value="Database Tables" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="50" y="620" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-6" value="user" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;html=1;" parent="1" vertex="1">
          <mxGeometry x="60" y="670" width="140" height="156" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-8" value="id: PK int" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontStyle=1" parent="vBqkdxFd15xFxzyx8WQM-6" vertex="1">
          <mxGeometry y="26" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-7" value="username" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-6" vertex="1">
          <mxGeometry y="52" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-9" value="email" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-6" vertex="1">
          <mxGeometry y="78" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-11" value="last_seen" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-6" vertex="1">
          <mxGeometry y="104" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-10" value="created_at" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-6" vertex="1">
          <mxGeometry y="130" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-13" value="post" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;html=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="870" width="140" height="208" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-14" value="id: PK int" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontStyle=1" parent="vBqkdxFd15xFxzyx8WQM-13" vertex="1">
          <mxGeometry y="26" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-15" value="content" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-13" vertex="1">
          <mxGeometry y="52" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-16" value="user_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-13" vertex="1">
          <mxGeometry y="78" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-17" value="last_seen" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-13" vertex="1">
          <mxGeometry y="104" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-18" value="created_at" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-13" vertex="1">
          <mxGeometry y="130" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-40" value="lat" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-13" vertex="1">
          <mxGeometry y="156" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-39" value="long" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-13" vertex="1">
          <mxGeometry y="182" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-19" value="follow" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;html=1;" parent="1" vertex="1">
          <mxGeometry x="414" y="670" width="140" height="156" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-20" value="follower_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontStyle=1" parent="vBqkdxFd15xFxzyx8WQM-19" vertex="1">
          <mxGeometry y="26" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-21" value="followee_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontStyle=1" parent="vBqkdxFd15xFxzyx8WQM-19" vertex="1">
          <mxGeometry y="52" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-23" value="is_active" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-19" vertex="1">
          <mxGeometry y="78" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-25" value="type: user | page&amp;nbsp;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-19" vertex="1">
          <mxGeometry y="104" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-24" value="created_at" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-19" vertex="1">
          <mxGeometry y="130" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-27" value="post_media" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;html=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="909" width="140" height="130" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-28" value="id: PK int" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontStyle=1" parent="vBqkdxFd15xFxzyx8WQM-27" vertex="1">
          <mxGeometry y="26" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-29" value="post_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-27" vertex="1">
          <mxGeometry y="52" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-30" value="media_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-27" vertex="1">
          <mxGeometry y="78" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-32" value="created_at" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-27" vertex="1">
          <mxGeometry y="104" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-33" value="media" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;html=1;" parent="1" vertex="1">
          <mxGeometry x="554" y="909" width="140" height="104" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-34" value="id: PK int" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontStyle=1" parent="vBqkdxFd15xFxzyx8WQM-33" vertex="1">
          <mxGeometry y="26" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-35" value="url" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-33" vertex="1">
          <mxGeometry y="52" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-38" value="created_at" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" parent="vBqkdxFd15xFxzyx8WQM-33" vertex="1">
          <mxGeometry y="78" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-41" value="" style="edgeStyle=entityRelationEdgeStyle;fontSize=12;html=1;endArrow=ERzeroToMany;endFill=1;startArrow=ERzeroToMany;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="vBqkdxFd15xFxzyx8WQM-8" target="vBqkdxFd15xFxzyx8WQM-20" edge="1">
          <mxGeometry width="100" height="100" relative="1" as="geometry">
            <mxPoint x="360" y="860" as="sourcePoint" />
            <mxPoint x="410" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-43" value="" style="edgeStyle=entityRelationEdgeStyle;fontSize=12;html=1;endArrow=ERoneToMany;rounded=0;" parent="1" source="vBqkdxFd15xFxzyx8WQM-8" target="vBqkdxFd15xFxzyx8WQM-16" edge="1">
          <mxGeometry width="100" height="100" relative="1" as="geometry">
            <mxPoint x="98.03999999999996" y="747.012" as="sourcePoint" />
            <mxPoint x="100" y="1031" as="targetPoint" />
            <Array as="points">
              <mxPoint x="50" y="820" />
              <mxPoint x="100" y="860" />
              <mxPoint x="20" y="890" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-48" value="" style="edgeStyle=entityRelationEdgeStyle;fontSize=12;html=1;endArrow=ERmandOne;startArrow=ERmandOne;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="vBqkdxFd15xFxzyx8WQM-30" target="vBqkdxFd15xFxzyx8WQM-34" edge="1">
          <mxGeometry width="100" height="100" relative="1" as="geometry">
            <mxPoint x="360" y="860" as="sourcePoint" />
            <mxPoint x="460" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-49" value="" style="edgeStyle=entityRelationEdgeStyle;fontSize=12;html=1;endArrow=ERzeroToMany;startArrow=ERzeroToOne;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="vBqkdxFd15xFxzyx8WQM-14" target="vBqkdxFd15xFxzyx8WQM-29" edge="1">
          <mxGeometry width="100" height="100" relative="1" as="geometry">
            <mxPoint x="360" y="860" as="sourcePoint" />
            <mxPoint x="460" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-50" value="HLD" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" parent="1" vertex="1">
          <mxGeometry y="1190" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-82" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.02;entryY=0.224;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF0080;strokeWidth=2;" parent="1" source="vBqkdxFd15xFxzyx8WQM-76" target="vBqkdxFd15xFxzyx8WQM-77" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-76" value="User A" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="60" y="1310" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-81" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF0080;strokeWidth=2;" parent="1" source="vBqkdxFd15xFxzyx8WQM-77" target="vBqkdxFd15xFxzyx8WQM-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-90" value="newpost()" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=14;" parent="vBqkdxFd15xFxzyx8WQM-81" vertex="1" connectable="0">
          <mxGeometry x="0.1571" y="-1" relative="1" as="geometry">
            <mxPoint y="-10" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-119" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#0000FF;strokeWidth=2;" parent="1" source="vBqkdxFd15xFxzyx8WQM-77" target="vBqkdxFd15xFxzyx8WQM-116" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-120" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;getFeed(user-id)&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="vBqkdxFd15xFxzyx8WQM-119" vertex="1" connectable="0">
          <mxGeometry x="0.0752" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-77" value="API G/w" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="160" y="1270" width="50" height="1140" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-88" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF0080;strokeWidth=2;" parent="1" source="vBqkdxFd15xFxzyx8WQM-104" target="vBqkdxFd15xFxzyx8WQM-80" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-89" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF0080;strokeWidth=2;" parent="1" source="vBqkdxFd15xFxzyx8WQM-78" target="vBqkdxFd15xFxzyx8WQM-84" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-78" value="Post Service" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="344" y="1360" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-80" value="posts&lt;br&gt;DB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="684" y="1350" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-83" value="media&lt;br&gt;storage" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="584" y="1220" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-85" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF0080;strokeWidth=2;" parent="1" source="vBqkdxFd15xFxzyx8WQM-84" target="vBqkdxFd15xFxzyx8WQM-83" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-84" value="Media Service" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="344" y="1240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-91" value="Post Service" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="354" y="1370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-100" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="vBqkdxFd15xFxzyx8WQM-92" target="vBqkdxFd15xFxzyx8WQM-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-92" value="Post Service" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="364" y="1380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-102" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="vBqkdxFd15xFxzyx8WQM-93" target="vBqkdxFd15xFxzyx8WQM-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-106" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;endArrow=none;endFill=0;startArrow=classic;startFill=1;" parent="1" source="vBqkdxFd15xFxzyx8WQM-93" target="vBqkdxFd15xFxzyx8WQM-104" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-108" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;endArrow=none;endFill=0;startArrow=classic;startFill=1;" parent="1" source="vBqkdxFd15xFxzyx8WQM-93" target="vBqkdxFd15xFxzyx8WQM-137" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="705" y="1660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-111" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="vBqkdxFd15xFxzyx8WQM-93" target="vBqkdxFd15xFxzyx8WQM-110" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-138" value="user feeds are pre-computed" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;" parent="vBqkdxFd15xFxzyx8WQM-111" vertex="1" connectable="0">
          <mxGeometry x="-0.0645" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="s_obpU2PJ0jePqCoq0_u-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=-0.091;entryY=0.6;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="vBqkdxFd15xFxzyx8WQM-93" target="s_obpU2PJ0jePqCoq0_u-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s_obpU2PJ0jePqCoq0_u-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="vBqkdxFd15xFxzyx8WQM-93" target="s_obpU2PJ0jePqCoq0_u-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-93" value="&lt;b&gt;NewsFeed &lt;br&gt;Generation Service&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;b&gt;OFFLINE&lt;/b&gt;&lt;br&gt;(async worker&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;&quot;&gt;pool)&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="370" y="1728" width="130" height="112" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-97" value="archived&lt;br&gt;feeds&lt;br&gt;DB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="704" y="1980" width="86" height="100" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-99" value="QUEUE" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="384" y="1520" width="60" height="140" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-101" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;topics:&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;1. posts&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;2. metadata&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0080;" parent="1" vertex="1">
          <mxGeometry x="444" y="1540" width="90" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-105" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF0080;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="vBqkdxFd15xFxzyx8WQM-92" target="vBqkdxFd15xFxzyx8WQM-104" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="464" y="1390" as="sourcePoint" />
            <mxPoint x="684" y="1390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-104" value="posts&amp;nbsp;&lt;br&gt;cache" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="574" y="1350" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-109" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;" parent="1" source="vBqkdxFd15xFxzyx8WQM-107" target="vBqkdxFd15xFxzyx8WQM-80" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-121" value="&lt;font style=&quot;font-size: 13px;&quot;&gt;CDC&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="vBqkdxFd15xFxzyx8WQM-109" vertex="1" connectable="0">
          <mxGeometry x="0.3667" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-107" value="posts&lt;br&gt;DB&lt;br&gt;(replica)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="684" y="1530" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-110" value="feeds&lt;br&gt;cache" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#FC1600;strokeColor=#B20000;fontColor=#ffffff;gradientColor=none;" parent="1" vertex="1">
          <mxGeometry x="390" y="1950" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-112" value="feeds&lt;br&gt;cache" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#FC1600;strokeColor=#B20000;fontColor=#ffffff;gradientColor=none;" parent="1" vertex="1">
          <mxGeometry x="400" y="1970" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-113" value="feeds&lt;br&gt;cache" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#FC1600;strokeColor=#B20000;fontColor=#ffffff;gradientColor=none;" parent="1" vertex="1">
          <mxGeometry x="410" y="1980" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-114" value="LRU &lt;br&gt;feeds&lt;br&gt;cache" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#FC1600;strokeColor=#B20000;fontColor=#ffffff;gradientColor=none;" parent="1" vertex="1">
          <mxGeometry x="420" y="1990" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-118" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;strokeColor=#0000FF;strokeWidth=2;" parent="1" source="vBqkdxFd15xFxzyx8WQM-115" target="vBqkdxFd15xFxzyx8WQM-77" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="60" y="1840" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-115" value="User B" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="30" y="2070" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-117" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.4;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#0000FF;strokeWidth=2;" parent="1" source="vBqkdxFd15xFxzyx8WQM-116" target="vBqkdxFd15xFxzyx8WQM-114" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-126" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="vBqkdxFd15xFxzyx8WQM-116" target="vBqkdxFd15xFxzyx8WQM-122" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-133" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="vBqkdxFd15xFxzyx8WQM-116" target="vBqkdxFd15xFxzyx8WQM-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-116" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;b&gt;NewsFeed &lt;br&gt;Publish Service&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&lt;br&gt;Ranking, Insertion, Ad-feeds,&lt;br&gt;&amp;nbsp;Location Services" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="410" y="2150" width="120" height="110" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-127" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="vBqkdxFd15xFxzyx8WQM-122" target="vBqkdxFd15xFxzyx8WQM-123" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-122" value="Feed Notification Service" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="384" y="2350" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-123" value="User C" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="50" y="2340" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-129" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.075;exitY=0.538;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="vBqkdxFd15xFxzyx8WQM-128" target="vBqkdxFd15xFxzyx8WQM-83" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="690" y="1250" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-128" value="CDN" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="680" y="1210" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-135" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="vBqkdxFd15xFxzyx8WQM-130" target="vBqkdxFd15xFxzyx8WQM-114" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-141" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.023;entryY=0.58;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="vBqkdxFd15xFxzyx8WQM-130" target="vBqkdxFd15xFxzyx8WQM-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-130" value="Feed Archiving Service&lt;br&gt;&lt;br&gt;trigger when cache evicts" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="544" y="1990" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-132" value="older archived feeds" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="674" y="1950" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-136" value="posts&lt;br&gt;DB&lt;br&gt;(replica)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="694" y="1540" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-137" value="posts&lt;br&gt;DB&lt;br&gt;(replica)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="704" y="1550" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="vBqkdxFd15xFxzyx8WQM-140" value="&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt;Special case when a famous User (celebrity) posts&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;1. Identify Users who have a large following (greater than 5K or more upto 1-2M)&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;2. When such users post, ignore the OFFLINE feed generation for all their followers. This will ensure that the FANOUT setup will not be overwhelmed to account for millions of writes into the feeds of the followers.&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;3. Instead, when a follower requests their feeds, insert the Celebrity user into their feed at runtime.&lt;/div&gt;" style="whiteSpace=wrap;html=1;align=left;verticalAlign=top;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="29" y="2440" width="770" height="150" as="geometry" />
        </mxCell>
        <mxCell id="s_obpU2PJ0jePqCoq0_u-1" value="write-through strategy" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="534" y="1325" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="s_obpU2PJ0jePqCoq0_u-2" value="&lt;font style=&quot;font-size: 13px;&quot;&gt;CDC&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="1">
          <mxGeometry x="726" y="1460" as="geometry">
            <mxPoint x="-307" y="17" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="s_obpU2PJ0jePqCoq0_u-4" value="Moderation" style="rounded=1;whiteSpace=wrap;html=1;align=center;fillColor=#b0e3e6;strokeColor=#0e8088;" vertex="1" parent="1">
          <mxGeometry x="544" y="1800" width="66" height="30" as="geometry" />
        </mxCell>
        <mxCell id="s_obpU2PJ0jePqCoq0_u-5" value="Ranking" style="rounded=1;whiteSpace=wrap;html=1;align=center;fillColor=#b0e3e6;strokeColor=#0e8088;" vertex="1" parent="1">
          <mxGeometry x="544" y="1830" width="66" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
